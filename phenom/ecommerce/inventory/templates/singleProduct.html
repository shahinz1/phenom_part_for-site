{% extends 'base.html' %}
{% load static %}
{% block content %}
    <!-- products and info -->
    <div class="popup-view">
        <div class="popup-card">
          <div class="popup-row">
              <div class="col">
                  <div class="slider">
                      <div class="products">
                        <div class="container-slider-popup">

                            <!-- Full-width images with number text -->
                             <div class="mySlides">
                              <div class="numbertext">1 / 6</div>
                                <img src="{% static 'media/2.jpg' %}" style="width:100%">
                            </div>
                          
                            <div class="mySlides">
                              <div class="numbertext">2 / 6</div>
                                <img src="{% static 'media/5.jpg' %}" style="width:100%">
                            </div>
                            {% comment %}
                            <div class="mySlides">
                              <div class="numbertext">3 / 6</div>
                                <img src="./static/images/15 (3).jpg" style="width:100%">
                            </div>
                          
                            <div class="mySlides">
                              <div class="numbertext">4 / 6</div>
                                <img src="./static/images/15 (2).jpg" style="width:100%">
                            </div>
                          
                            <div class="mySlides">
                              <div class="numbertext">5 / 6</div>
                                <img src="./static/images/15 (3).jpg" style="width:100%">
                            </div>
                          
                            <div class="mySlides">
                              <div class="numbertext">6 / 6</div>
                                <img src="./static/images/15 (2).jpg" style="width:100%">
                            </div>
                           {% endcomment %}
                            <!-- Next and previous buttons -->
                            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                            <a class="next" onclick="plusSlides(1)">&#10095;</a>
                          
                            <!-- Thumbnail images -->
                            <div class="row">
                              <div class="column">
                                <img class="demo cursor" src="{% static 'media/3.jpg' %}" style="width:100%" onclick="currentSlide(1)" alt="The Woods">
                              </div>
                               <div class="column">
                                <img class="demo cursor" src="{% static 'media/4.jpg' %}" style="width:100%" onclick="currentSlide(2)" alt="Cinque Terre">
                              </div>
                              <div class="column">
                                <img class="demo cursor" src="{% static 'media/2.jpg' %}" style="width:100%" onclick="currentSlide(3)" alt="Mountains and fjords">
                              </div>
                              <div class="column">
                                <img class="demo cursor" src="{% static 'media/2.jpg' %}" style="width:100%" onclick="currentSlide(4)" alt="Northern Lights">
                              </div>
                              <div class="column">
                                <img class="demo cursor" src="{% static 'media/2.jpg' %}" style="width:100%" onclick="currentSlide(5)" alt="Nature and sunrise">
                              </div>
                            </div>
                          </div>
                      </div>
                  </div>
  
              </div>
              <div class="col">
                  <div class="popup-content">
                      <p class="brand">Lorem ipsum dolor sit.</p>
                      <hr class="divider">
                      <h2 class="des">{{product.product__name}}</h2>
                      <p class="price">Brand: lorem</p>
                      <h3 class="title">Description:</h3>
                      <p class="description"></p>
                      <h4>Size:</h4>
                      <div class="size-selection">
                        {% comment %} {% for a in data %}
                        <p class="selected active">{{a.product_inventory__units}}</p>
                        <p class="selected">{{a.attribute_values__attribute_value}}</p>
                        {% endfor %} {% endcomment %}
                          {% comment %}
                          <p class="selected">M</p>
                          <p class="selected">L</p>
                          <p class="selected">XL</p> {% endcomment %}
                      </div>
  
                      <div class="color-container">
                          <h3 class="title">Color:</h3>
                          <div class="colors">
                              <span class="color active" primary="#fff" color="white"></span>
                              <span class="color" primary="#444" color="black"></span>
                              <span class="color" primary="#29b864" color="green"></span>
                          </div>
                      </div>
  
                      <p>Quantity: <input class="quan" type="text" value="1"></p>
                      <span class="brand-price">price: $ {{product.attribute_values__attribute_value}}</span>
                      <button type="button" id="add-button" value="{{product.id}}" class="button-cart">
                          <i class="fa fa-shopping-cart"></i>
                          Add to cart</button>
                          <a href="#" class="button-buy-now">PHENOMINU ACTIVE WEAR</a>
                  </div>
  
  
  
              </div>
              
          </div>
          
        </div>
    </div>
      <!-- products and info -->

      <!-- related -->
    <h1 class="section-title">Related</h1>
  <div class="container-product">
    <div class="product">
      <div class="product-card">
        <h2 class="name">lorem</h2>
        <span class="price">$250.00</span>
        <a class="popup-btn">Add to cart</a>
        <img src="./static/images/15 (2).jpg" class="product-img" alt="">
      </div>
    </div>
    <div class="product">
      <div class="product-card">
        <h2 class="name">lorem</h2>
        <span class="price">$250.00</span>
        <a class="popup-btn">Add to cart</a>
        <img src="./static/images/15 (2).jpg" class="product-img" alt="">
      </div>
    </div>
    <div class="product">
      <div class="product-card">
        <h2 class="name">lorem</h2>
        <span class="price">$250.00</span>
        <a class="popup-btn">Add to cart</a>
        <img src="./static/images/15 (2).jpg" class="product-img" alt="">
      </div>
    </div>
    <div class="product">
      <div class="product-card">
        <h2 class="name">lorem</h2>
        <span class="price">$250.00</span>
        <a class="popup-btn">Add to cart</a>
        <img src="./static/images/15 (2).jpg" class="product-img" alt="">
      </div>
    </div>
  </div>
      <!-- related -->

      <!-- also may like -->
      <h1 class="section-title">you also may like</h1>
        <div class="slide-container">
          <i class='bx bx-left-arrow-alt' id="slide-left"></i>
    <section class="container-carousel" id="slider">
        
        <div class="thumbnail">
          <div class="product">
            <div class="product-card">
              <h2 class="name">lorem</h2>
              <span class="price">$250.00</span>
              <a class="popup-btn">Add to cart</a>
              <img src="./static/images/15 (2).jpg" class="product-img" alt="">
            </div>
          </div>
        </div>
        <div class="thumbnail">
          <div class="product">
            <div class="product-card">
              <h2 class="name">lorem</h2>
              <span class="price">$250.00</span>
              <a class="popup-btn">Add to cart</a>
              <img src="./static/images/15 (2).jpg" class="product-img" alt="">
            </div>
          </div>
        </div>
        <div class="thumbnail">
          <div class="product">
            <div class="product-card">
              <h2 class="name">lorem</h2>
              <span class="price">$250.00</span>
              <a class="popup-btn">Add to cart</a>
              <img src="./static/images/15 (2).jpg" class="product-img" alt="">
            </div>
          </div>
        </div>
        <div class="thumbnail">
          <div class="product">
            <div class="product-card">
              <h2 class="name">lorem</h2>
              <span class="price">$250.00</span>
              <a class="popup-btn">Add to cart</a>
              <img src="./static/images/15 (2).jpg" class="product-img" alt="">
            </div>
          </div>
        </div>
        <div class="thumbnail">
          <div class="product">
            <div class="product-card">
              <h2 class="name">lorem</h2>
              <span class="price">$250.00</span>
              <a class="popup-btn">Add to cart</a>
              <img src="./static/images/15 (2).jpg" class="product-img" alt="">
            </div>
          </div>
        </div>
        <div class="thumbnail">
          <div class="product">
            <div class="product-card">
              <h2 class="name">lorem</h2>
              <span class="price">$250.00</span>
              <a class="popup-btn">Add to cart</a>
              <img src="./static/images/15 (2).jpg" class="product-img" alt="">
            </div>
          </div>
        </div>
    </section>
    <i class='bx bx-right-arrow-alt' id="slide-right"></i>
</div>
      <!-- also may like -->

<script>

  $(document).on('click', '#add-button', function (e) {
    e.preventDefault();
    $.ajax({
        type: 'POST',
        url: '{% url "basket:basket_add" %}',
        data: {
            productid: $('#add-button').val(),
            productqty: $('#select option:selected').text(),
            csrfmiddlewaretoken: "{{csrf_token}}",
            action: 'post'
        },
        success: function (json) {
           document.getElementById("basket-qty").innerHTML = json.qty
        },
        error: function (xhr, errmsg, err) {}
    });
})
      
      let slideIndex = 1;
showSlides(slideIndex);

// Next/previous controls
function plusSlides(n) {
  showSlides(slideIndex += n);
}

// Thumbnail image controls
function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  let i;
  let slides = document.getElementsByClassName("mySlides");
  let dots = document.getElementsByClassName("demo");
  let captionText = document.getElementById("caption");
  if (n > slides.length) {slideIndex = 1}
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";
  }
  for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";
  dots[slideIndex-1].className += " active";
}



// carousel

let thumbnails = document.getElementsByClassName('thumbnail');
let slider = document.getElementById('slider');

let buttonRight = document.getElementById('slide-right');
let buttonLeft = document.getElementById('slide-left');

buttonLeft.addEventListener('click', function(){
    slider.scrollLeft -= 125;
})

buttonRight.addEventListener('click', function(){
    slider.scrollLeft += 125;
})

// size and color popup
const sizes = document.querySelectorAll('.selected');
const colors = document.querySelectorAll('.color');
const gradients = document.querySelectorAll('.gradient');

let prevColor = "blue";
let animationEnd = true;

function changeSize(){
    sizes.forEach(size => size.classList.remove('active'));
    this.classList.add('active');
}

function changeColor(){
    if(!animationEnd) return;
    let primary = this.getAttribute('primary');
    let color = this.getAttribute('color');
    let gradient = document.querySelector(`.gradient[color="${color}"]`);
    let prevGradient = document.querySelector(`.gradient[color="${prevColor}"]`);

    if(color == prevColor) return;

    colors.forEach(c => c.classList.remove('active'));
    this.classList.add('active');

    document.documentElement.style.setProperty('--primary', primary);
    
    shoes.forEach(s => s.classList.remove('show'));
    shoe.classList.add('show');

    gradients.forEach(g => g.classList.remove('first', 'second'));
    gradient.classList.add('first');
    prevGradient.classList.add('second');

    prevColor = color;
    animationEnd = false;

    gradient.addEventListener('animationend', () => {
        animationEnd = true;
    })
}

sizes.forEach(size => size.addEventListener('click', changeSize));
colors.forEach(c => c.addEventListener('click', changeColor));


    </script>
    {% endblock content %}
